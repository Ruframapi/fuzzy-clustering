<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <script src="resources/js/jquery.min.js" type="text/javascript"></script>
        <script src="resources/js/highstock.js"></script>
        <script src="resources/js/highcharts.js"></script>
        <script src="resources/js/exporting.js"></script>
        <script type="text/javascript">
        function renderChart(dataChart) {
            var chart;
			//var dataChart = [[161.2, 51.6], [167.5, 59.0], [159.5, 49.2]];
			data = $.parseJSON(dataChart);
  			 var hiddenCode = "#{descriptionSearch.hiddenCode}";  
                chart = new Highcharts.Chart({
                    chart: {
                        renderTo: 'container',
                        type: 'scatter',
                        zoomType: 'xy'
                    },
                    title: {
                        text: 'Height Versus Weight of 507 Individuals by Gender'
                    },
                    subtitle: {
                        text: 'Source: Heinz  2003'
                    },
                    xAxis: {
                        title: {
                            enabled: true,
                            text: 'Height (cm)'
                        },
                        startOnTick: true,
                        endOnTick: true,
                        showLastLabel: true
                    },
                    yAxis: {
                        title: {
                            text: 'Weight (kg)'
                        }
                    },
                    tooltip: {
                        formatter: function() {
                                return ''+
                                this.x +' cm, '+ this.y +' kg';
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'left',
                        verticalAlign: 'top',
                        x: 100,
                        y: 70,
                        floating: true,
                        backgroundColor: '#FFFFFF',
                        borderWidth: 1
                    },
                    plotOptions: {
                        scatter: {
                            marker: {
                                radius: 2,
                                states: {
                                    hover: {
                                        enabled: true,
                                        lineColor: 'rgb(100,100,100)'
                                    }
                                }
                            },
                            states: {
                                hover: {
                                    marker: {
                                        enabled: false
                                    }
                                }
                            }
                        }
                    },
                    series: [{
                        name: 'Female',
                        color: 'rgba(223, 83, 83, .5)',
                        data: data
            
                    }]
                });
            };
        </script>
	</h:head>
    <body>
        <h:form prependId="false">
        	<h:inputHidden id="dataValue" value="#{chart.data}" />
			<h:commandButton onclick="renderChart(document.getElementById('dataValue').value);" immediate="true" type="button"></h:commandButton>

        </h:form>
        <div id="container" style="width: 100%; height: 500px"></div>
    </body>
</html>